If you open "FloorButton.asm", this floor switch sprite have a crapload of features and settings. Go read the comments that lists out the functions.

To insert the test demo included in this package, I provided a MWL file (level and exanimations), graphics, and map16 blocks, all can be inserted
via Lunar Magic.

For blocks, you need GPS version 1.4.4 or higher (just in case). I also provided a list file for where the blocks should be on the map 16.

For sprites, I also included a list on that for what ID it should be on as well.

NOTE: When using the sa-1 patch, several emulators fail to properly handle SA-1 accessible addresses, both Mario and sprite interacting with blocks
are processed under SA-1 and those blocks uses LM's examination RAM which happen to be at bank $7F. Under SA-1 SNES registers and bank $7F becomes
inaccessible.